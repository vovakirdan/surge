@entrypoint
fn main() -> int {
    let r = (async {
        let _child = task async {
            checkpoint().await();
            checkpoint().await();
            print("child done");
            return 1;
        };

        if true {
            return 9;
        }

        return 0;
    }).await();

    compare r {
        Success(v) => print("parent=" + (v to string));
        Cancelled() => print("parent=cancelled");
    };

    let guard = task async {
        sleep(50).await();
        return 0;
    };
    let _ = guard.await();

    return 0;
}
