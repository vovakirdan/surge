async fn sender(ch: own Channel<int>) -> int {
    ch.send(7);
    print("sent");
    return 0;
}

async fn receiver(ch: own Channel<int>) -> int {
    let v = ch.recv();
    compare v {
        Some(x) => print("recv=" + (x to string));
        nothing => print("recv=nothing");
    };
    return 0;
}

@entrypoint
fn main() -> int {
    let ch = make_channel::<int>(0);

    let sender_ch = ch;
    let recv_ch = ch;
    let sender_task = task sender(sender_ch);
    let recv_task = task receiver(recv_ch);

    let _ = sender_task.await();
    let _ = recv_task.await();
    return 0;
}
