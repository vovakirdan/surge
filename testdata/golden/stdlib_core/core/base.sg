pragma module, no_std;

// Basic magic methods for built-in types.

extern<bool> {
    pub fn __bool(self: bool) -> bool { return self; }
}

extern<int> {
    pub fn __bool(self: int) -> bool { return self != 0; }
}

extern<uint> {
    pub fn __bool(self: uint) -> bool { return self != 0:uint; }
}

extern<float> {
    pub fn __bool(self: float) -> bool { return self != 0.0; }
}

extern<string> {
    pub fn __bool(self: string) -> bool { return self != ""; }
}

extern<nothing> {
    pub fn __bool(self: nothing) -> bool { return false; }
}

extern<int8> {
    pub fn __bool(self: int8) -> bool { return self != (0):int8; }
}

extern<int16> {
    pub fn __bool(self: int16) -> bool { return self != (0):int16; }
}

extern<int32> {
    pub fn __bool(self: int32) -> bool { return self != (0):int32; }
}

extern<int64> {
    pub fn __bool(self: int64) -> bool { return self != (0):int64; }
}

extern<uint8> {
    pub fn __bool(self: uint8) -> bool { return self != (0):uint8; }
}

extern<uint16> {
    pub fn __bool(self: uint16) -> bool { return self != (0):uint16; }
}

extern<uint32> {
    pub fn __bool(self: uint32) -> bool { return self != (0):uint32; }
}

extern<uint64> {
    pub fn __bool(self: uint64) -> bool { return self != (0):uint64; }
}

extern<float32> {
    pub fn __bool(self: float32) -> bool { return self != (0.0):float32; }
}

extern<float64> {
    pub fn __bool(self: float64) -> bool { return self != (0.0):float64; }
}

// I/O functions

pub fn print(s: string) -> nothing {
    let ptr = rt_string_ptr(s);
    let slen = rt_string_len(s);
    rt_write_stdout(ptr, slen);
    let newline = "\n";
    rt_write_stdout(rt_string_ptr(newline), 1:uint);
}

pub fn len<T: HasLength<T>>(self: &T) -> uint {
    return self.__len();
}
