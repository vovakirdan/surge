pragma no_std;
// Core Option type and its constructor.

// stub for test
// PLEASE REMOVE THIS IF U COPY TO CORE MODULE
pub fn default<T>() -> T;
pub fn panic(msg: string) -> nothing;


pub tag Some<T>(T);
pub type Option<T> = Some(T) | nothing;

extern<Option<T>> {
    pub fn safe<T>(self: Option<T>) -> T {
        compare self {
            Some(v) => v;
            _ => default::<T>();
        };
    }

    pub fn panic<T>(self: Option<T>, msg: string) -> nothing {
        compare self {
            Some(_) => return nothing;
            _ => panic(msg);
        };
    }
}
