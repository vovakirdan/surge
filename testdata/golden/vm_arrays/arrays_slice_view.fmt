fn write_str(s: string) -> nothing {
    let ptr = rt_string_ptr(&s);
    let slen = rt_string_len_bytes(&s);
    rt_write_stdout(ptr, slen);
}

fn write_line(s: string) -> nothing {
    write_str(s);
    let nl = "\n";
    rt_write_stdout(rt_string_ptr(&nl), 1:uint);
}

fn print_int(n: int) -> nothing {
    write_line(n to string);
}

fn sum(a: int[]) -> int {
    let n: int = a.__len() to int;
    let mut s: int = 0;
    for i: int in 0..n {
        s = s + a[i];
    }
    return s;
}

@entrypoint
fn main() -> int {
    let mut a: int[] = [1, 2, 3, 4];
    print_int(sum(a[[1..3]]));
    print_int(sum(a[[..-1]]));
    print_int(sum(a[[-3..-1]]));
    print_int(sum(a[[2..1]]));
    print_int(sum(a[[1..=2]]));
    let mut view = a[[1..3]];
    view[0] = 77;
    print_int(a[1]);

    let mut f: int[4] = [10, 20, 30, 40];
    let mut fv = f[[1..3]];
    fv[0] = 88;
    print_int(f[1]);
    return 0;
}
