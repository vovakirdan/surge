fn write_str(s: string) -> nothing {
    let ptr = rt_string_ptr(&s);
    let length = rt_string_len_bytes(&s);
    rt_write_stdout(ptr, length);
}

fn write_line(s: string) -> nothing {
    write_str(s);
    let nl = "\n";
    rt_write_stdout(rt_string_ptr(&nl), 1:uint);
}

@entrypoint
fn main() -> int {
    let bytes: byte[] = [72:uint8, 105:uint8];
    let res = string.from_bytes(&bytes);
    let mut code: int = 1;
    compare res {
        Success(s) => {
            write_line(s);
            code = 0;
        }
        err => {
            write_line("err=" + (err.code to string));
            code = 1;
        }
    }
    return code;
}
