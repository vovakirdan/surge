fn write_str(s: string) -> nothing {
    let ptr = rt_string_ptr(&s);
    let len = rt_string_len_bytes(&s);
    rt_write_stdout(ptr, len);
}

fn write_line(s: string) -> nothing {
    write_str(s);
    let nl = "\n";
    rt_write_stdout(rt_string_ptr(&nl), 1:uint);
}

fn print_uint(u: uint) -> nothing {
    write_line(u to string);
}

@entrypoint
fn main() -> int {
    let ascii = "abc";
    print_uint(rt_string_len(&ascii));

    let smile = "ğŸ™‚";
    print_uint(rt_string_len(&smile));

    let first = ascii[0];
    let last = ascii[-1];
    print_uint(first to uint);
    print_uint(last to uint);

    let s = "abcdef";
    write_line(s[[1..4]]);
    write_line(s[[..-1]]);
    write_line(s[[-3..-1]]);
    write_line(s[[1..=3]]);
    write_line("abc"[[2..1]]);

    let hi = "hi";
    let bv = rt_string_bytes_view(&hi);
    print_uint(bv.__len());
    let b0: uint = bv[0] to uint;
    print_uint(b0);

    return 0;
}
