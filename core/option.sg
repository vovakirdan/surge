// Core Option type and its constructor.

pub tag Some<T>(T);
pub type Option<T> = Some(T) | nothing;

extern<Option<T>> {
    pub fn safe(self: Option<T>) -> T {
        compare self {
            Some(v) => v;
            _ => default<T>();
        };
    }

    pub fn panic(self: Option<T>, msg: string) -> T {
        compare self {
            Some(v) => v;
            _ => panic(msg);
        };
    }
}
